/**
 * impress.js
 *
 * impress.js is a presentation tool based on the power of CSS3 transforms and transitions
 * in modern browsers and inspired by the idea behind prezi.com.
 *
 * MIT Licensed.
 *
 * Copyright 2011-2012 Bartek Szopka (@bartaz)
 *
 * ------------------------------------------------
 *  author:  Bartek Szopka
 *  version: 0.3
 *  url:     http://bartaz.github.com/impress.js/
 *  source:  http://github.com/bartaz/impress.js/
 */
!function(a,b){"use strict";{var c=function(){var b=a.createElement("dummy").style,c="Webkit Moz O ms Khtml".split(" "),d={};return function(a){if("undefined"==typeof d[a]){var e=a.charAt(0).toUpperCase()+a.substr(1),f=(a+" "+c.join(e+" ")+e).split(" ");d[a]=null;for(var g in f)if(void 0!==b[f[g]]){d[a]=f[g];break}}return d[a]}}(),d=function(a){return[].slice.call(a)},e=function(a,b){var d,e;for(d in b)b.hasOwnProperty(d)&&(e=c(d),null!=e&&(a.style[e]=b[d]));return a},f=function(b){return a.getElementById(b)},g=function(b,c){return c=c||a,c.querySelector(b)},h=function(b,c){return c=c||a,d(c.querySelectorAll(b))},i=function(a){return" translate3d("+a.x+"px,"+a.y+"px,"+a.z+"px) "},j=function(a,b){var c=" rotateX("+a.x+"deg) ",d=" rotateY("+a.y+"deg) ",e=" rotateZ("+a.z+"deg) ";return b?e+d+c:c+d+e},k=function(a){return" scale("+a+") "},l=function(){return f(b.location.hash.replace(/^#\/?/,""))},m=navigator.userAgent.toLowerCase(),n=null!=c("perspective")&&a.body.classList&&a.body.dataset&&-1==m.search(/(iphone)|(ipod)|(android)/),o={};b.impress=function(c){if(c=c||"impress",o["impress-root-"+c])return o["impress-root-"+c];var m=f(c);if(!n)return void(m.className="impress-not-supported");m.className="";var p=g("meta[name='viewport']")||a.createElement("meta");p.content="width=1024, minimum-scale=0.75, maximum-scale=0.75, user-scalable=no",p.parentNode!=a.head&&(p.name="viewport",a.head.appendChild(p));var q=a.createElement("div");q.className="canvas",d(m.childNodes).forEach(function(a){q.appendChild(a)}),m.appendChild(q);var r=h(".step",m);a.documentElement.style.height="100%",e(a.body,{height:"100%",overflow:"hidden"});var s={position:"absolute",transformOrigin:"top left",transition:"all 0s ease-in-out",transformStyle:"preserve-3d"};e(m,s),e(m,{top:"50%",left:"50%",perspective:"1000px"}),e(q,s);var t={translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},scale:1},u={},v=function(a){return!!(a&&a.id&&u["impress-"+a.id])};r.forEach(function(a,b){var c=a.dataset,d={translate:{x:c.x||0,y:c.y||0,z:c.z||0},rotate:{x:c.rotateX||0,y:c.rotateY||0,z:c.rotateZ||c.rotate||0},scale:c.scale||1,el:a};a.id||(a.id="step-"+(b+1)),u["impress-"+a.id]=d,e(a,{position:"absolute",transform:"translate(-50%,-50%)"+i(d.translate)+j(d.rotate)+k(d.scale),transformStyle:"preserve-3d"})});var w=null,x=null,y=function(a){if(!v(a)||a==w)return!1;b.scrollTo(0,0);var c=u["impress-"+a.id];w&&w.classList.remove("active"),a.classList.add("active"),m.className="step-"+a.id,b.clearTimeout(x),x=b.setTimeout(function(){b.location.hash="#/"+a.id},1e3);var d={rotate:{x:-parseInt(c.rotate.x,10),y:-parseInt(c.rotate.y,10),z:-parseInt(c.rotate.z,10)},translate:{x:-c.translate.x,y:-c.translate.y,z:-c.translate.z},scale:1/parseFloat(c.scale)},f=d.scale>=t.scale,g=w?"1s":"0";return e(m,{perspective:1e3*c.scale+"px",transform:k(d.scale),transitionDuration:g,transitionDelay:f?"500ms":"0ms"}),e(q,{transform:j(d.rotate,!0)+i(d.translate),transitionDuration:g,transitionDelay:f?"0ms":"500ms"}),t=d,w=a,a},z=function(){var a=r.indexOf(w)-1;return a=a>=0?r[a]:r[r.length-1],y(a)},A=function(){var a=r.indexOf(w)+1;return a=a<r.length?r[a]:r[0],y(a)};return b.addEventListener("hashchange",function(){y(l())},!1),b.addEventListener("orientationchange",function(){b.scrollTo(0,0)},!1),y(l()||r[0]),o["impress-root-"+c]={"goto":y,next:A,prev:z}}}}(document,window),function(a,b){"use strict";a.addEventListener("keydown",function(b){if(8==b.keyCode||9==b.keyCode||b.keyCode>=32&&b.keyCode<=34||b.keyCode>=37&&b.keyCode<=40){switch(b.keyCode){case 33:case 37:case 38:impress().prev();break;case 9:case 32:case 34:case 39:case 40:impress().next();break;case 8:impress().goto(a.getElementById("overview"))}b.preventDefault()}},!1),a.addEventListener("click",function(b){for(var c=b.target;c&&"A"!=c.tagName&&c!=a.body;)c=c.parentNode;if(c&&"A"==c.tagName){var d=c.getAttribute("href");d&&"#"==d[0]&&(c=a.getElementById(d.slice(1)))}impress().goto(c)&&(b.stopImmediatePropagation(),b.preventDefault())},!1),a.addEventListener("click",function(b){for(var c=b.target;c&&c.classList&&!c.classList.contains("step")&&c!=a.body;)c=c.parentNode;impress().goto(c)&&b.preventDefault()},!1),a.addEventListener("touchstart",function(a){if(1===a.touches.length){var c=a.touches[0].clientX,d=.3*b.innerWidth,e=null;d>c?e=impress().prev():c>b.innerWidth-d&&(e=impress().next()),e&&a.preventDefault()}},!1)}(document,window);
